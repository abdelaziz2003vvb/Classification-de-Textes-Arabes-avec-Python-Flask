{% extends "base.html" %}

{% block title %}Upload - Classification{% endblock %}

{% block content %}
<header>
    <h1>ğŸ“„ Upload et Classification</h1>
    <a href="{{ url_for('main.index') }}" class="back-link">â† Retour Ã  l'accueil</a>
</header>

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-{{ category }}">
            <strong>{% if category == 'error' %}âŒ{% else %}âœ…{% endif %}</strong>
            <span>{{ message }}</span>
        </div>
        {% endfor %}
    {% endif %}
{% endwith %}

<!-- Upload de fichier -->
<div class="card">
    <h2>ğŸ“ Option 1: Upload un fichier .txt</h2>
    <form method="post" action="{{ url_for('main.classify_file') }}" enctype="multipart/form-data">
        <div class="form-group">
            <label for="file">SÃ©lectionnez un fichier texte arabe:</label>
            <input type="file" id="file" name="file" accept=".txt" required class="file-input">
        </div>
        <div id="file-preview" style="display:none;"></div>
        <button type="submit" class="btn btn-primary">
            ğŸš€ Classifier le Fichier
        </button>
    </form>
</div>

<!-- Saisie de texte -->
<div class="card">
    <h2>âœï¸ Option 2: Saisir du texte</h2>
    <form method="post" action="{{ url_for('main.classify_text') }}">
        <div class="form-group">
            <label for="text">Saisissez votre texte arabe:</label>
            <textarea id="text" name="text" rows="10" required 
                      placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„Ù…ØºØ±Ø¨ÙŠ ÙŠÙ†Ù…Ùˆ Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ…Ø±..."
                      class="text-input" dir="rtl"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">
            ğŸš€ Classifier le Texte
        </button>
    </form>
</div>

<div class="info-box">
    <h3>â„¹ï¸ Instructions:</h3>
    <ul>
        <li>Le fichier doit Ãªtre au format .txt encodÃ© en UTF-8</li>
        <li>Le texte doit Ãªtre en arabe</li>
        <li>CatÃ©gories disponibles: 
            {% for cat in categories %}
            <strong>{{ cat }}</strong>{% if not loop.last %}, {% endif %}
            {% endfor %}
        </li>
    </ul>
</div>

<footer>
    <p>Â© 2025 Classification de Textes Arabes</p>
</footer>
{% endblock %}